// v1.1
"use strict";function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol?"symbol":typeof e};(function(){var e=function(){function e(o,t,n,i){_classCallCheck(this,e),this.client=o,this.url=t,this.options=n||{},this.callback=i}return e.prototype.run=function(){var e=this;return this.callback?(this.send(this.callback),void 0):"fetch"in window?this.send().then(function(e){if(e.error){var o=Error(e.error.message);return o.code=e.error.code,Promise.reject(o)}return e.feed}):new Promise(function(o,t){e.send(function(e){if(e.error){var n=Error(e.error.message);n.code=e.error.code,t(n)}else o(e.feed)})})},e.prototype.send=function(e){var o=window.feednamiEndpoint||"https://api.feednami.com",t=o+"/api/v1.1",n=this.url,i=this.options,r="url="+encodeURIComponent(n);this.client.publicApiKey&&(r+="&public_api_key="+this.client.publicApiKey),i.format&&(r+="&include_xml_document&format="+i.format),i.includeXml&&(r+="&include_xml_document");var l=t+"/feeds/load?"+r;return"fetch"in window?fetch(l).then(function(e){return e.json()}).then(function(o){return e&&e(o),o}):(window.XDomainRequest?function(){var o=document.createElement("script"),t="jsonp_callback_"+(new Date).getTime()+"_"+Math.round(1e6*Math.random());l+="&jsonp_callback="+t,window[t]=function(n){e(n),document.body.removeChild(o),window[t]=null;try{delete window[t]}catch(i){}},o.src=l,document.body.appendChild(o)}():function(){var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState==4&&e(JSON.parse(o.responseText))},o.open("GET",l),o.send()}(),void 0)},e}(),o=function(){function o(){_classCallCheck(this,o),this.promisePolyfillCallbacks=[],this.promiseLoaded="Promise"in window}return o.prototype.loadPolyfills=function(e){if(this.promiseLoaded)e();else if(this.promisePolyfillCallbacks.push(e),!this.polyfillScriptsAdded){this.polyfillScriptsAdded=!0;var o=document.createElement("script");o.src="https://feednami-static.storage.googleapis.com/js/v1.1/promise.js",document.head.appendChild(o)}},o.prototype.loadPromiseCallback=function(){this.promiseLoaded=!0;for(var e=this.promisePolyfillCallbacks,o=Array.isArray(e),t=0,e=o?e:e[Symbol.iterator]();;){var n;if(o){if(t>=e.length)break;n=e[t++]}else{if(t=e.next(),t.done)break;n=t.value}var i=n;console.log(i),i()}},o.prototype.load=function(o,t,n){if((o===void 0?"undefined":_typeof(o))=="object")return this.load(t.url,t,n);if(typeof t=="function")return this.load(o,{},t);var i=new e(this,o,t,n);return i.run()},o.prototype.loadGoogleFormat=function(e,o){return feednami.load(e,{format:"google",includeXml:!0},o)},o.prototype.setPublicApiKey=function(e){this.publicApiKey=e},o}();window.feednami=new o})();